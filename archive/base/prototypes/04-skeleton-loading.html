<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>04 — Skeleton Loading | Kyle DS Prototypes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primitive-neutral-50:  oklch(0.978 0.005 90);
      --primitive-neutral-100: oklch(0.958 0.006 90);
      --primitive-neutral-200: oklch(0.905 0.007 90);
      --primitive-neutral-300: oklch(0.855 0.008 90);
      --primitive-neutral-400: oklch(0.755 0.010 90);
      --primitive-neutral-500: oklch(0.610 0.012 90);
      --primitive-neutral-600: oklch(0.490 0.010 90);
      --primitive-neutral-950: oklch(0.135 0.008 90);
      --primitive-blue-500: oklch(0.550 0.220 260);
      --primitive-blue-600: oklch(0.480 0.220 260);
      --bg-page: var(--primitive-neutral-50);
      --bg-surface: oklch(0.995 0.002 90);
      --bg-muted: var(--primitive-neutral-100);
      --text-primary: var(--primitive-neutral-950);
      --text-secondary: var(--primitive-neutral-600);
      --text-muted: var(--primitive-neutral-400);
      --border-default: var(--primitive-neutral-200);
      --border-strong: var(--primitive-neutral-300);
      --accent-blue: var(--primitive-blue-500);
      --accent-blue-hover: var(--primitive-blue-600);
      --text-on-accent: oklch(0.995 0.002 90);
      --shimmer-highlight: oklch(0.97 0.003 90 / 0.6);
      --motion-fast: 160ms;
      --motion-base: 240ms;
      --ease-out: cubic-bezier(0, 0, 0.2, 1);
      --space-1: 4px; --space-2: 8px; --space-3: 12px;
      --space-4: 16px; --space-6: 24px; --space-8: 32px;
      --space-12: 48px; --space-16: 64px;
      --radius-sm: 6px; --radius-md: 10px; --radius-full: 9999px;
      --radius-lg: 12px;
      --radius-xl: 16px;
    }
    [data-theme="dark"] {
      --bg-page: oklch(0.135 0.010 90);
      --bg-surface: oklch(0.160 0.012 90);
      --bg-muted: oklch(0.205 0.012 90);
      --text-primary: oklch(0.95 0.003 90);
      --text-secondary: oklch(0.65 0.008 90);
      --text-muted: oklch(0.45 0.006 90);
      --border-default: oklch(0.260 0.012 90);
      --border-strong: oklch(0.330 0.012 90);
      --accent-blue: oklch(0.670 0.200 260);
      --accent-blue-hover: oklch(0.720 0.190 260);
      --text-on-accent: oklch(0.995 0.002 90);
      --shimmer-highlight: oklch(0.30 0.005 270 / 0.4);
    }
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      font-feature-settings: "cv02", "cv03", "cv04", "cv11";
      background: var(--bg-page); color: var(--text-primary);
      line-height: 1.6; -webkit-font-smoothing: antialiased;
    }
    .page { max-width: 800px; margin: 0 auto; padding: var(--space-12) var(--space-6); }
    .page-header { margin-bottom: var(--space-8); }
    .page-title { font-size: 1.75rem; font-weight: 650; letter-spacing: -0.02em; line-height: 1.2; margin-bottom: var(--space-2); }
    .page-description { color: var(--text-secondary); font-size: 0.9375rem; }

    /* Controls */
    .controls { display: flex; gap: var(--space-3); align-items: center; margin-bottom: var(--space-8); flex-wrap: wrap; }
    .btn {
      display: inline-flex; align-items: center; gap: var(--space-2);
      padding: var(--space-2) var(--space-4); font-family: inherit; font-size: 0.875rem;
      font-weight: 500; border-radius: var(--radius-sm); border: 1px solid transparent; cursor: pointer;
    }
    .btn-primary { background: var(--accent-blue); color: var(--text-on-accent); }
    .btn-primary:hover { background: var(--accent-blue-hover); }
    .btn-secondary { background: var(--bg-surface); color: var(--text-primary); border-color: var(--border-default); }
    .btn-secondary:hover { background: var(--bg-muted); }
    .btn:focus-visible { outline: 2px solid var(--accent-blue); outline-offset: 2px; }

    .mode-switch { display: flex; gap: 0; border: 1px solid var(--border-default); border-radius: var(--radius-sm); overflow: hidden; }
    .mode-switch label {
      padding: var(--space-1) var(--space-3); font-size: 0.8125rem; cursor: pointer;
      background: var(--bg-surface); color: var(--text-secondary); border-right: 1px solid var(--border-default);
    }
    .mode-switch label:last-child { border-right: none; }
    .mode-switch input { display: none; }
    .mode-switch input:checked + label { background: var(--accent-blue); color: var(--text-on-accent); }

    /* Dashboard grid */
    .dashboard { display: flex; flex-direction: column; gap: var(--space-6); }
    .stats-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-4); }
    @media (max-width: 500px) { .stats-row { grid-template-columns: 1fr; } }
    .card {
      background: var(--bg-surface); border: 1px solid var(--border-default);
      border-radius: var(--radius-md); padding: var(--space-6); position: relative; overflow: hidden;
    }

    /* Skeleton elements */
    .skel { background: var(--bg-muted); border-radius: var(--radius-sm); }
    .skel-circle { border-radius: 50%; }
    .skel-text { height: 14px; margin-bottom: 8px; }
    .skel-text-sm { height: 10px; margin-bottom: 6px; }
    .skel-heading { height: 28px; margin-bottom: 8px; }

    /* Shimmer animation */
    @media (prefers-reduced-motion: no-preference) {
      .shimmer .skel {
        background-image: linear-gradient(110deg, transparent 30%, var(--shimmer-highlight) 50%, transparent 70%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite linear;
      }
      @keyframes shimmer {
        to { background-position: -200% 0; }
      }
      .pulse .skel {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
      }
      /* Content reveal */
      .card-content {
        transition: opacity var(--motion-base) var(--ease-out),
                    transform var(--motion-base) var(--ease-out);
      }
      .card-content.entering {
        opacity: 0;
        transform: translateY(4px);
      }
    }

    /* Real content — hidden by default */
    .card-content { display: none; }
    .card.loaded .card-skeleton { display: none; }
    .card.loaded .card-content { display: block; }

    /* Stats */
    .stat-value { font-size: 1.75rem; font-weight: 700; letter-spacing: -0.02em; line-height: 1.2; }
    .stat-label { font-size: 0.8125rem; color: var(--text-secondary); margin-top: var(--space-1); }

    /* Profile */
    .profile { display: flex; gap: var(--space-4); align-items: flex-start; }
    .profile-avatar {
      width: 56px; height: 56px; border-radius: 50%; flex-shrink: 0;
      background: var(--accent-blue); color: var(--text-on-accent);
      display: flex; align-items: center; justify-content: center;
      font-weight: 600; font-size: 1.125rem;
    }
    .profile-name { font-weight: 600; font-size: 1.0625rem; margin-bottom: 2px; }
    .profile-bio { font-size: 0.875rem; color: var(--text-secondary); line-height: 1.5; }

    /* Table */
    .table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
    .table th { text-align: left; font-weight: 600; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; padding: var(--space-2) 0; border-bottom: 1px solid var(--border-default); }
    .table td { padding: var(--space-3) 0; border-bottom: 1px solid var(--border-default); }
    .table tr:last-child td { border-bottom: none; }
    .status-badge { display: inline-block; padding: 2px 8px; font-size: 0.75rem; font-weight: 500; border-radius: var(--radius-full); }
    .status-stable { background: oklch(0.920 0.045 155); color: oklch(0.45 0.15 145); }
    .status-beta { background: oklch(0.95 0.04 85); color: oklch(0.50 0.14 85); }
    .status-draft { background: var(--bg-muted); color: var(--text-muted); }
    [data-theme="dark"] .status-stable { background: oklch(0.250 0.060 155); color: oklch(0.72 0.14 145); }
    [data-theme="dark"] .status-beta { background: oklch(0.22 0.04 85); color: oklch(0.78 0.12 85); }
    [data-theme="dark"] .status-draft { background: oklch(0.22 0.006 90); color: oklch(0.55 0.006 90); }

    /* Legend */
    .legend { margin-top: var(--space-16); padding: var(--space-6); background: var(--bg-muted); border-radius: var(--radius-md); font-size: 0.8125rem; color: var(--text-secondary); }
    .legend h3 { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-muted); margin-bottom: var(--space-3); }
    .legend-item { display: flex; gap: var(--space-3); padding: var(--space-2) 0; border-bottom: 1px solid var(--border-default); }
    .legend-item:last-child { border-bottom: none; }
    .legend-label { font-weight: 500; color: var(--text-primary); white-space: nowrap; }

    /* Theme toggle */
    .theme-toggle { position: fixed; top: var(--space-4); right: var(--space-4); z-index: 100; background: var(--bg-surface); border: 1px solid var(--border-default); border-radius: var(--radius-full); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-secondary); }
    .theme-toggle:hover { border-color: var(--border-strong); color: var(--text-primary); }
    .theme-toggle .icon-sun, [data-theme="dark"] .theme-toggle .icon-moon { display: none; }
    [data-theme="dark"] .theme-toggle .icon-sun { display: block; }
    .theme-toggle .icon-moon { display: block; }
  </style>
</head>
<body>
  <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
    <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
    <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
  </button>

  <div class="page">
    <header class="page-header">
      <h1 class="page-title">Dashboard</h1>
      <p class="page-description">Skeleton loading states with shimmer and pulse animations. Click "Load content" to see the transition.</p>
    </header>

    <div class="controls">
      <button class="btn btn-primary" id="btn-load">Load content</button>
      <button class="btn btn-secondary" id="btn-reset">Reset</button>
      <div class="mode-switch">
        <input type="radio" name="mode" id="mode-shimmer" value="shimmer" checked>
        <label for="mode-shimmer">Shimmer</label>
        <input type="radio" name="mode" id="mode-pulse" value="pulse">
        <label for="mode-pulse">Pulse</label>
      </div>
    </div>

    <!-- Dashboard content -->
    <div class="dashboard shimmer" id="dashboard">

      <!-- Stats Row -->
      <div class="stats-row">
        <div class="card" id="stat-1">
          <div class="card-skeleton">
            <div class="skel skel-heading" style="width: 60%;"></div>
            <div class="skel skel-text" style="width: 40%;"></div>
          </div>
          <div class="card-content">
            <div class="stat-value">1,247</div>
            <div class="stat-label">Total commits</div>
          </div>
        </div>
        <div class="card" id="stat-2">
          <div class="card-skeleton">
            <div class="skel skel-heading" style="width: 50%;"></div>
            <div class="skel skel-text" style="width: 35%;"></div>
          </div>
          <div class="card-content">
            <div class="stat-value">98.6%</div>
            <div class="stat-label">Uptime</div>
          </div>
        </div>
        <div class="card" id="stat-3">
          <div class="card-skeleton">
            <div class="skel skel-heading" style="width: 55%;"></div>
            <div class="skel skel-text" style="width: 45%;"></div>
          </div>
          <div class="card-content">
            <div class="stat-value">342ms</div>
            <div class="stat-label">Avg response</div>
          </div>
        </div>
      </div>

      <!-- Profile Card -->
      <div class="card" id="profile-card">
        <div class="card-skeleton">
          <div style="display: flex; gap: 16px; align-items: flex-start;">
            <div class="skel skel-circle" style="width: 56px; height: 56px; flex-shrink: 0;"></div>
            <div style="flex: 1;">
              <div class="skel skel-text" style="width: 40%; height: 16px;"></div>
              <div class="skel skel-text" style="width: 90%;"></div>
              <div class="skel skel-text" style="width: 70%;"></div>
            </div>
          </div>
        </div>
        <div class="card-content">
          <div class="profile">
            <div class="profile-avatar">KS</div>
            <div>
              <div class="profile-name">Kyle Snav</div>
              <div class="profile-bio">Design engineer building systems that scale. Focused on typography, color science, and motion design.</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Table Card -->
      <div class="card" id="table-card">
        <div class="card-skeleton">
          <div style="display: flex; gap: 16px; margin-bottom: 16px;">
            <div class="skel skel-text-sm" style="width: 30%;"></div>
            <div class="skel skel-text-sm" style="width: 20%;"></div>
            <div class="skel skel-text-sm" style="width: 25%;"></div>
          </div>
          <div class="skel skel-text" style="width: 100%; margin-bottom: 12px;"></div>
          <div class="skel skel-text" style="width: 95%; margin-bottom: 12px;"></div>
          <div class="skel skel-text" style="width: 100%; margin-bottom: 12px;"></div>
          <div class="skel skel-text" style="width: 90%; margin-bottom: 12px;"></div>
          <div class="skel skel-text" style="width: 100%;"></div>
        </div>
        <div class="card-content">
          <table class="table">
            <thead><tr><th>Component</th><th>Status</th><th>Last updated</th></tr></thead>
            <tbody>
              <tr><td>Button</td><td><span class="status-badge status-stable">Stable</span></td><td>2 days ago</td></tr>
              <tr><td>Input</td><td><span class="status-badge status-beta">Beta</span></td><td>1 week ago</td></tr>
              <tr><td>Modal</td><td><span class="status-badge status-draft">Draft</span></td><td>3 weeks ago</td></tr>
              <tr><td>Toggle</td><td><span class="status-badge status-stable">Stable</span></td><td>1 month ago</td></tr>
              <tr><td>Drawer</td><td><span class="status-badge status-beta">Beta</span></td><td>2 months ago</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="legend">
      <h3>Animation Reference</h3>
      <div class="legend-item"><span class="legend-label">Shimmer</span><span>linear-gradient at 110deg, background-position sweep, 1.5s infinite linear</span></div>
      <div class="legend-item"><span class="legend-label">Pulse</span><span>opacity 1→0.5→1, 2s cubic-bezier(0.4, 0, 0.6, 1) infinite</span></div>
      <div class="legend-item"><span class="legend-label">Content reveal</span><span>opacity 0→1, translateY(4px→0), 240ms ease-in (--ease-out)</span></div>
      <div class="legend-item"><span class="legend-label">Dark mode</span><span>Shimmer highlight adapts: oklch(0.30 0.005 270 / 0.4) on dark backgrounds</span></div>
    </div>
  </div>

  <script>
    document.getElementById('theme-toggle').addEventListener('click', () => {
      document.documentElement.dataset.theme = document.documentElement.dataset.theme === 'dark' ? 'light' : 'dark';
    });

    const dashboard = document.getElementById('dashboard');
    const cards = document.querySelectorAll('.card');

    // Mode switching
    document.querySelectorAll('input[name="mode"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        dashboard.classList.remove('shimmer', 'pulse');
        dashboard.classList.add(e.target.value);
      });
    });

    // Load content
    document.getElementById('btn-load').addEventListener('click', () => {
      cards.forEach((card, i) => {
        setTimeout(() => {
          const content = card.querySelector('.card-content');
          content.classList.add('entering');
          card.classList.add('loaded');
          // Trigger reflow then remove entering class for transition
          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              content.classList.remove('entering');
            });
          });
        }, i * 120);
      });
    });

    // Reset
    document.getElementById('btn-reset').addEventListener('click', () => {
      cards.forEach(card => {
        card.classList.remove('loaded');
        const content = card.querySelector('.card-content');
        content.classList.remove('entering');
      });
    });
  </script>
</body>
</html>
